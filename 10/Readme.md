# Приоритизация гипотез, A/B-тестирование.

Вместе с отделом маркетинга крупного интернет-магазина вы подготовили список гипотез для увеличения выручки.
**Цель исследования:** Приоритизайия гипотез, запуск A/B-теста и анализ результатов.

**ОБЩИЙ ВЫВОД:**

Цель исследования достигнута.
Для достижения цели исследования были решены следующие задачи:

1. Загружены и подготовлены к анализу данные.

Датасет hypothesis состоит из следующих столбцов:
- Hypothesis — краткое описание гипотезы;
- Reach — охват пользователей по 10-балльной шкале;
- Impact — влияние на пользователей по 10-балльной шкале;
- Confidence — уверенность в гипотезе по 10-балльной шкале;
- Efforts — затраты ресурсов на проверку гипотезы по 10-балльной шкале. Чем больше значение Efforts, тем дороже проверка гипотезы.

Датасет состоит из 9 строк (гипотез). Типы данных соответствуют содержимому. Наименования столбцов привели в соответствии с хорошим стилем к нижнему регистру. Пропуски в данных, явные и не явные дубликаты отсутствуют.

Датасет orders состоит из следующих столбцов:
- transactionId — идентификатор заказа;
- visitorId — идентификатор пользователя, совершившего заказ;
- date — дата, когда был совершён заказ;
- revenue — выручка заказа;
- group — группа A/B-теста, в которую попал заказ.

Датасет orders состоит из 1197 строк. Типы данных соответствуют содержимому. Наименования столбцов привели в соответствии с хорошим стилем к нижнему регистру и добавили нижнее подчеркивание. Пропуски в данных, явные и неявные дубликаты отсутствуют.

Датасет visitors состоит из следующих столбцов:
- date — дата;
- group — группа A/B-теста;
- visitors — количество пользователей в указанную дату в указанной группе A/B-теста.

Датасет visitors состоит из 62 строк. Типы данных соответствуют содержимому. Наименования столбцов соответствуют хорошему стилю. Пропуски в данных, явные и не явные дубликаты отсутствуют.

2. Приоритизированы гипотезы.
- Применен фреймворк ICE для приоритизации гипотез.

При применении способа ICE самой приоритетной гипотезой стала "Запустить акцию, дающую скидку на товар в день рождения" при параметрах Impact — 9 (насколько сильно изменение повлияет на пользователей, их опыт и удовлетворение от продукта), Confidence — 9 (насколько вы уверены, что это изменение повлияет на пользователей именно так) и Efforts — 5 (сколько стоит протестировать эту гипотезу).

- применен фреймворк RICE для приоритизации гипотез.

При применении способа RICE приоритизация изменилась в пользу гипотезы "Добавить форму подписки на все основные страницы, чтобы собрать базу клиентов для email-рассылок" при параметрах: Reach — 10 (скольких пользователей затронет изменение, которое вы хотите внести), Impact — 7 (насколько сильно изменение повлияет на пользователей, их опыт и удовлетворение от продукта), Confidence — 8 (насколько вы уверены, что это изменение повлияет на пользователей именно так) и Efforts — 5 (сколько стоит протестировать эту гипотезу). А гипотеза "Запустить акцию, дающую скидку на товар в день рождения" спустилась на 5 строку приоритета.

- получили ответ на вопрос: Как изменилась приоритизация гипотез при применении RICE вместо ICE.

Изменение приоритета по способу RICE в отличии от ICE произошло из-за параметра Reach равному 10 баллам у гипотезы "Добавить форму подписки на все основные страницы, чтобы собрать базу клиентов для email-рассылок". Это говорит о том, что данное изменение затронет максимальное количество пользователей. А у приоритетной гипотезы по ICE "Запустить акцию, дающую скидку на товар в день рождения" этот параметр равен 1 - минимальное количество пользователей затронет данное изменение.

3. Проанализирован A/B-тест
- построен график кумулятивной выручки по группам.

По графику кумулятивной выручки по дням и группам А/В теста видно:

* группа B почти всё время опережает A
* резкий рывок 18–19 августа. На этих датах в группе B видно вертикальное «ступенькообразное» увеличение. По форме это похоже на 1–2 очень крупных заказа. После прыжка наклон кривой возвращается к исходному, поэтому прирост, похоже, объясняется именно  единичным событием, а не стабильным повышением конверсии или среднего чека.
* динамика после выброса стабильная.

- построен график кумулятивного среднего чека по группам.

По графику кумулятивного среднего чека по дням и группам А/В теста видно:

* нестабильность величины среднего чека до 15.08 в обоих группах. Кривые меняются местами и неравномерны.
* с 15.08 величина среднего чека становится стабильной, плавной и к концу месяца постепенно увеличивается
* 17–18 августа у группы B резкий скачок более чем на 3 0000. После выброса средний чек в группе B постепенно «проседает», но остаётся выше A.

- построен график относительного изменения кумулятивного среднего чека группы B к группе A.

График относительного изменения кумулятивного среднего чека группы B к группе A ведет себя нестабильно. Есть резкие скачки и спады, это свидетельствует о крупных заказах или выбросах.

- построен график кумулятивного среднего количества заказов на посетителя по группам.

На графике кумулятивной конверсии по группам видно, что в первые дни конверсия у группы А была выше, чем у В, но с 06.08 группы поменялись местами: конверсия группы А просела, а конверсия группы В выросла. Далее обе конверсии идут параллельно с незначительными колебаниями.

- построен график относительного изменения кумулятивного среднего количества заказов на посетителя группы B к группе A.

На графике относительного измененя кумулятивной конверсии группы В к группе А видно что конверсия группы B лидирует: прирост сначала колебался от 15% до 20% к концу месяца в районе 10-15%.

- построен точечный график количества заказов по пользователям.

По точечному графику количества заказов по пользователям видно, что:
* большинство делает только один заказ. Основная масса пользователей оформила ровно 1 покупку.
* частота заказов резко падает. Те, кто вернулся хотя бы раз, со второго на третий заказ возвращаются в 5–10 раз реже.
* есть «тяжёлый хвост» сверх-активных. Единичные пользователи сделали по 8–11 заказов — их стоит исключить из A/B-анализа, чтобы не искажать средние.

- посчитан 95-й и 99-й перцентили количества заказов на пользователя.

95 % пользователей оформили ≤ 2 заказов, а лишь 1 % перешагнули отметку 4. Разумно выбрать 4 заказа на одного пользователя за нижнюю границу числа заказов, и отсеять аномальных пользователей по ней.

- построен точечный график стоимостей заказов.

По точечному графику стоимости заказов видно, что максимальная сумма заказа сильно превосходит все остальные заказы. Она завышает средний показатель. Основная доля стоимости заказов находится в пределах 25000. Тяжелый хвост находится свыше 50000.

- посчитан 95-й и 99-й перцентили стоимости заказов.

Рост от 28000 до 58233 всего за четыре процентных пункта показывает, что хвост распределения очень «тяжёлый»: 1 % заказов уже вдвое дороже, чем у границы 95-го перцентиля. Разумно выбрать 58000 (округлив 99-й перцентиль) за нижнюю границу стоимости заказов, и отсеять аномальных пользователей по ней.

- посчитана статистическая значимость различий в среднем количестве заказов на посетителя между группами по «сырым» данным.

По "сырым" данным значение p-value = 0.017, что меньше уровня статистической значимости, следовательно, гипотезу о том, что различий в конверсии между группами нет, отвергаем. Относительная разница в конверсии между группами составила 13,8%- на столько конверсия группы В больше конверсии группы А.

- посчитана статистическая значимость различий в среднем чеке заказа между группами по «сырым» данным.

По "сырым" данным значение p-value = 0.73, что значительно больше уровня статистической значимости, следовательно гипотезу о том, что различий в сумме среднего чека между группами нет, не отвергаем. Относительная разница суммы среднего чека между группами составила 26% - на столько сумма среднего чека группы В больше суммы среднего чека группы А.

- посчитана статистическая значимость различий в среднем количестве заказов на посетителя между группами по «очищенным» данным.

Для "очищенных" данных также справедливо утверждение о том, что конверсии разные и нулевая гипотеза верна. Эффект по конверсии устойчив. Очищение данных не изменило знак и даже слегка усилило значимость (p-value снизилась с 0.017 до 0.014). Прирост B-варианта нельзя списать на «китов». Отношение +15 % сохранилась — значит, улучшение затрагивает «массовых» пользователей. Очистка затронула лишь 15 пользователей — доля < 1.5 %, теперь метрика отражает «нормальное» поведение.

- посчитана статистическая значимость различий в среднем чеке заказа между группами по «очищенным» данным.

p-value = 0.85, что значительно больше 0.05. Это означает, что причин отвергать нулевую гипотезу и считать, что в среднем чеке по «очищенным» данным есть различия, нет. После удаления «тяжёлых» пользователей средний чек двух групп практически одинаков (и даже на 1 % ниже в B). Разница +26%, которую мы видели ранее, была целиком обусловлена единичными «китами». Как только эти заказы убрали, эффект исчез.

- принято решение по результатам теста.

Останавливаем эксперимент и фиксируем победу группы B. Эксперимент достиг цели. Группа B увеличивает выручку за счёт роста конверсии.

**Приоритизована гипотеза:** "Добавить форму подписки на все основные страницы, чтобы собрать базу клиентов для email-рассылок".

**По результатам А/В теста принято решение:** Останавливить эксперимент и зафиксировать победу группы B.
